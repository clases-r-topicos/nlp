library(udpipe)
library(word2vec)
library(tidyverse)

## Build the model get word embeddings and nearest neighbours
model <- word2vec(x = x, dim = 15, iter = 20, min_count = 2)
embedding <- as.matrix(model)

dim(embedding); head(embedding)


embedding <- predict(model, c("bus", "toilet"), type = "embedding")

data <- read_csv("data/data_larazon_publico_v2.csv")
x <- data$cuerpo
model <- word2vec(x = x, dim = 300, iter = 20, min_count = 5, threads = 16)
embedding <- as.matrix(model)


lookslike <- predict(model, c("democracia", "violencia", "presidente", "dictadura", "rojo", "rey"), type = "nearest", top_n = 5)
lookslike

#new_emb <- predict(model, c("bus", "toilet"), type = "embedding")

readr::write_csv(as.data.frame(embedding), "data/news_vector.csv")
write.word2vec(model, "data/news_vectors_300.bin")


